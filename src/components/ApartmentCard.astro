---
import type { ApartmentBaseFragment } from '@lib/datocms/types'

export interface Props {
  apartment: ApartmentBaseFragment
  locale: string
  customImage?: {
    url: string
    alt?: string | null
  }
  customDescription?: string
}

const { apartment, locale, customImage, customDescription } = Astro.props
---

<a 
  href={`/${locale}/accommodations/${apartment.slug}`}
  class="group cursor-pointer block"
>
  <div class="aspect-square overflow-hidden rounded-lg mb-4 relative">
    <img 
      src={customImage?.url || apartment.featuredImage?.url || apartment.boxImage?.url}
      alt={customImage?.alt || apartment.featuredImage?.alt || apartment.name}
      class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
    />
    {apartment.category?.name && (
      <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full">
        <span class="text-xs font-medium text-gray-700">{apartment.category.name}</span>
      </div>
    )}
  </div>
  <h3 class="text-xl font-semibold text-acacia-primary mb-2">{apartment.name}</h3>
  <p class="text-gray-600 text-sm">{customDescription || apartment.claim || apartment.highlight}</p>
  {!customDescription && apartment.price && (
    <p class="text-acacia-secondary font-semibold mt-2">{apartment.price}</p>
  )}
</a>