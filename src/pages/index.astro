---
import { getPreferredLocale, setLocaleCookie } from '@lib/i18n'

// Get the preferred locale and redirect
const preferredLocale = await getPreferredLocale(Astro.request, Astro.cookies)
setLocaleCookie(Astro.cookies, preferredLocale)

// Redirect to the locale-specific homepage
return Astro.redirect(`/${preferredLocale}/`, 302)
---